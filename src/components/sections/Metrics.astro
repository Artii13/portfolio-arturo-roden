---
// Metrics Section - Números de impacto con contador animado
---

<section class="bg-gray-950 py-16 md:py-24">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-0">
      
      <!-- Métrica 1 -->
      <div class="flex items-center gap-4 md:justify-center md:border-r md:border-gray-700 md:pr-8">
        <div class="p-3 rounded-xl bg-indigo-500/10">
          <i data-lucide="clock" class="w-8 h-8 text-indigo-400 animate-pulse"></i>
        </div>
        <div>
          <div class="flex items-baseline gap-1">
            <span class="metric-counter text-5xl md:text-6xl font-bold text-white" data-target="15">0</span>
            <span class="text-2xl text-indigo-400 font-semibold">+</span>
          </div>
          <p class="text-sm text-gray-400 mt-1">horas/semana ahorradas</p>
        </div>
      </div>
      
      <!-- Métrica 2 -->
      <div class="flex items-center gap-4 md:justify-center md:border-r md:border-gray-700 md:px-8">
        <div class="p-3 rounded-xl bg-indigo-500/10">
          <i data-lucide="zap" class="w-8 h-8 text-indigo-400 animate-pulse"></i>
        </div>
        <div>
          <div class="flex items-baseline gap-1">
            <span class="text-2xl text-indigo-400 font-semibold">&lt;</span>
            <span class="metric-counter text-5xl md:text-6xl font-bold text-white" data-target="3">0</span>
            <span class="text-2xl text-indigo-400 font-semibold">s</span>
          </div>
          <p class="text-sm text-gray-400 mt-1">respuesta de tu agente IA</p>
        </div>
      </div>
      
      <!-- Métrica 3 -->
      <div class="flex items-center gap-4 md:justify-center md:pl-8">
        <div class="p-3 rounded-xl bg-indigo-500/10">
          <i data-lucide="moon" class="w-8 h-8 text-indigo-400 animate-pulse"></i>
        </div>
        <div>
          <div class="flex items-baseline gap-1">
            <span class="metric-always text-5xl md:text-6xl font-bold text-white">24/7</span>
            <span class="text-2xl text-indigo-400 font-semibold">/365</span>
          </div>
          <p class="text-sm text-gray-400 mt-1">tus sistemas nunca duermen</p>
        </div>
      </div>
      
    </div>
  </div>
</section>

<script is:inline>
  (function() {
    // Esperar a que GSAP y ScrollTrigger estén cargados
    function initMetrics() {
      if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') {
        setTimeout(initMetrics, 100);
        return;
      }
      
      gsap.registerPlugin(ScrollTrigger);
      
      // Contador para métricas numéricas
      const counters = document.querySelectorAll('.metric-counter');
      
      counters.forEach(counter => {
        const target = parseInt(counter.dataset.target);
        
        ScrollTrigger.create({
          trigger: counter,
          start: 'top 80%',
          onEnter: () => {
            gsap.to(counter, {
              textContent: target,
              duration: 2,
              ease: 'power2.out',
              snap: { textContent: 1 },
              onUpdate: function() {
                counter.textContent = Math.round(this.targets()[0].textContent);
              }
            });
          },
          once: true
        });
      });
      
      // Fade-in para 24/7
      const alwaysMetric = document.querySelector('.metric-always');
      if (alwaysMetric) {
        gsap.from(alwaysMetric, {
          opacity: 0,
          y: 20,
          duration: 1,
          scrollTrigger: {
            trigger: alwaysMetric,
            start: 'top 80%'
          }
        });
      }
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initMetrics);
    } else {
      initMetrics();
    }
  })();
</script>
